<?php
//Wed Sep  2 22:37:43 CEST 2009 fixes HD site/sched/slot bug
//get opers
include "$searchpath/incl/opers_incl.php";
?>
<div id="renalsearchformdiv" class="searchoptions">
	<form action="<?php echo $rwareroot ?>/search/renalsearch.php" method="post">
        <input type="hidden" name="runsearch" value="Y" id="runsearch" />
<fieldset class="search">
    	    <legend class="search">Search Demographics</legend>
<span class="fieldsetnotes">IMPORTANT: This is a Boolean AND search: only records matching <b>all the criteria</b> will be displayed.<br>
    <a href="<?php echo $rwareroot ?>/search/renalboolsearch.php">Switch to BOOLEAN AND/OR search page</a>. NOTE: Enter dates as <b>dd/mm/yyyy</b>.</span>
<ul>
<li><label for="modalcode">Modality</label>&nbsp; <select name="modalcode" id="modalcode">
            <option value="">Select Modality...</option>
            <?php
            $popcode="modalcode";
            $popname="modality";
            $poptable="modalcodeslist";
            include '../incl/simpleoptions.php';
            ?>
            </select>&nbsp;&nbsp;<label for="sex">Sex</label>&nbsp; <input type="radio" name="sex" id="sexf" value ="F" />Female &nbsp; &nbsp; <input type="radio" name="sex" id="sexm" value ="M" />Male&nbsp;&nbsp;<label for="ethnicity">Ethnicity</label>&nbsp; <select name="ethnicity" id="ethnicity"><?php include '../optionlists/ethnicities.html'; ?></select></li>
<li><label for="doboper">DOB</label>&nbsp;
    <select name="doboper" id="doboper"><?php echo "$dateopers"; ?></select>
    <input type="text" name="birthdate" size="10" /> or <label for="dobstart">DOB between</label> <input type="text" name="dobstart" placeholder="dd/mm/yyyy" size="12" /> and <input type="text" name="dobend" placeholder="dd/mm/yyyy" size="12" /> </li>
<li><label for="dodoper">Date of Death</label>&nbsp;
     <select name="dodoper" placeholder="dodoper"><?php echo "$dateopers"; ?></select>
     <input type="text" name="deathdate" size="10" /> or <label for="dodstart">DOD between</label> <input type="text" name="dodstart" placeholder="dd/mm/yyyy" size="12" /> and <input type="text" name="dodend" placeholder="dd/mm/yyyy" size="12" /> </li>
<li><label for="ageoper">Age</label>&nbsp;
    <select name="ageoper" id="ageoper"><?php echo "$numopers"; ?></select>
    <input type="text" name="age" id="age" size="3" /> or <label for="agestart">Age between</label> <input type="text" name="agestart" id="agestart" size="3" /> and <input type="text" name="ageend" id="ageend" size="3" /></li>
</ul>
</fieldset>
<fieldset class="search">
    <legend class="search">Search Renal/Clinical Data</legend>
<ul class="fldset">
<li><label for="esdstatus">ESA Status</label>&nbsp; <select name="esdstatus" id="esdstatus">
            <option value="">Select Status...</option>
            <option>Current</option>
            <option>Discontinued</option>
            <option>Unknown</option>
             </select>
            </li>
<li><label for="endstagedateoper">ESRF date</label>&nbsp;
    <select name="endstagedateoper" id="endstagedateoper"><?php echo $dateopers; ?></select>
    <input type="text" name="endstagedate" id="endstagedate" size="10" /> or <label for="endstagedatestart">ESRF date between</label> <input type="text" name="endstagedatestart" id="endstagedatestart" size="10" /> and <input type="text" name="endstagedateend" id="endstagedateend" size="10" /></li>
<li><label for="accessCurrent">Current Access</label>&nbsp; <select name="accessCurrent" id="accessCurrent">
            <option value="">Select Type...</option>
            <?php include '../optionlists/accesstypes.html'; ?>
            </select>&nbsp;&nbsp;<label for="accessPlan">Access Plan</label>&nbsp; <select name="accessPlan" id="accessPlan">
            <option value="">Select Plan...</option>
			<?php
			//----Sun 31 Jul 2011----
			$optionlistname='accessplans';
			include '../optionlists/getoptionlist_incl.php';
			?>
            </select></li>
<li><label for="txWaitListStatus">Tx Wait List Status</label>&nbsp; <select name="txWaitListStatus" id="txWaitListStatus">
            <option value="">Select Status...</option>
			<?php
			//----Sun 31 Jul 2011----
			$optionlistname='waitliststatus';
			include '../optionlists/getoptionlist_incl.php';
			?>
            </select></li>
<li><label for="lowDialPlan">Dialysis Plan</label>&nbsp;<select name="lowDialPlan">
            <option value="">Select Status...</option>
			<?php
			//----Sun 31 Jul 2011----
			$optionlistname='lowdialplans';
			include '../optionlists/getoptionlist_incl.php';
			?>
            </select></li>
</ul>
</fieldset>
<fieldset class="search">
    <legend class="search">Search Problem Lists</legend>
<ul class="fldset">
<li><label for="problem">Problem</label>&nbsp;&nbsp;
    <select name="problemoper" id="problemoper">
        <option value="">Select operator...</option>
    <?php echo $textopers ?></select>
    &nbsp;<input type="text" class="srch" name="problem" size="30" id="problem" /></li>
</ul>
</fieldset>
<fieldset class="search">
    <legend class="search">Search Medication Lists</legend>
<ul class="fldset">
<li><label for="drugname">Drug name</label>&nbsp;&nbsp;
    <select name="drugnameoper" id="drugnameoper">
        <option value="">Select operator...</option>
    <?php echo $textopers ?></select>
    &nbsp;<input type="text" class="srch" name="drugname" size="30" id="drugname" /></li>
<li><label for="drugsearchtype">Search type</label>&nbsp;&nbsp;<input type="radio" name="drugsearchtype" value="Current" checked="checked">Current Meds Only &nbsp; &nbsp; <input type="radio" name="drugsearchtype" value="All">Current &amp; Terminated</li>
</ul>
</fieldset>
<fieldset class="search">
    <legend class="search">Search Current HD Profile Data</legend>
<ul class="fldset">
<li><label for="currsite">Specify Site</label>&nbsp;<select name="currsite" id="currsite">
<option value="">Select HD Site...</option>
<?php
include '../optionlists/hdsiteoptions.php';
?>
</select> &nbsp;&nbsp; <label for="currsched">Specify Schedule</label>&nbsp;
<select name="currsched" id="currsched">
	<option value="">Select MWF/TTS...</option>
<option>MonWedFri</option>
<option>TueThuSat</option>
</select>	&nbsp;&nbsp; <label for="currslot">Specify Slot</label>&nbsp;
	<select name="currslot" id="currslot">
		<option value="">Select AM/PM/Eve...</option>
		<option>AM</option>
		<option>PM</option>
		<option>Eve</option>
	</select></li>
</ul>
</fieldset>
<fieldset class="search">
<legend class="search">Search Current Pathology</legend>
<span class="fieldsetnotes">NB remember certain results may be text e.g. "POSITIVE" or "NEGATIVE".</span>
<ul class="fldset">
<?php
include 'pathfields_incl.php';
?>    
<li><label for="path1">Path Field #1</label>&nbsp;<select name="path1" id="path1">
<option value="">Select current pathology field...</option>
<?php echo "$pathfieldoptions"; ?>    
</select>&nbsp;<select name="path1oper">
    <?php echo $numopers ?>
 </select>&nbsp;<input type="text" name="path1val" size="12" /> or <b>between</b> <input type="text" name="path1low" size="6" /> and <input type="text" name="path1hi" size="6" /></li>
<li><label for="path1dateoper">Path Field #1 Date</label> <select name="path1dateoper" id="path1dateoper">
    <?php echo $dateopers ?>
 </select>&nbsp;<input type="text" name="path1dateval" size="10" /> or <b>between</b> <input type="text" name="path1datestart" size="10" /> and <input type="text" name="path1dateend" size="10" /></li>
<li><a class="ui-state-default" style="color: green;" onclick='$("#path2div").toggle();'>Add another pathology field...</a></li>
</ul>
 <div id="path2div" style="display:none;">
    <ul>
 <li><label for="path2">Path Field #2</label>&nbsp;<select name="path2" id="path2">
 <option value="">Select second pathology field...</option>
 <?php echo "$pathfieldoptions"; ?>    
 </select>&nbsp;<select name="path2oper">
     <?php echo $numopers ?>
  </select>&nbsp;<input type="text" name="path2val" size="12" /> or <b>between</b> <input type="text" name="path2low" size="6" /> and <input type="text" name="path2hi" size="6" /></li>
 <li><label for="path2dateoper">Path Field #2 Date</label> <select name="path2dateoper" id="path2dateoper">
     <?php echo $dateopers ?>
  </select>&nbsp;<input type="text" name="path2dateval" size="10" /> or <b>between</b> <input type="text" name="path2datestart" size="10" /> and <input type="text" name="path2dateend" size="10" /></li>
	</ul>
  </div>
</fieldset>
<div id="customsearchdiv">
    <fieldset class="search">
    	    <legend class="search">Add Custom Search Fields</legend>
    	     <span class="fieldsetnotes">Note: non-TEXT BLOCK fields only are available ("single line" fields). Remember certain fields have prescribed values (e.g. diabetesflag='Y' or 'N').<br>
    	         To increase search results text fields are converted to lower case (e.g. "MacDonald" &rarr; "macdonald")</span>
   <ul>
    <li><label for="searchfield1">Search field #1:</label>&nbsp;<select name="searchfield1" id="searchfield1">
        <option value="">Select field...</option>
    <?php foreach($availablefields as $key => $value) { echo '<option>'.$value.'</option>'."\n"; } ?>
    </select>&nbsp;&nbsp;
    <select name="searchoper1" id="searchoper1">
        <option value="">Select operator...</option>
    <?php echo $allopers ?></select>
    &nbsp;<input type="text" class="srch" name="searchval1" size="20" id="searchval1" /></li>
    <li><label for="searchfield2">Search field #2:</label>&nbsp;<select name="searchfield2" id="searchfield2">
    <option value="">Select field...</option>
    <?php foreach($availablefields as $key => $value) { echo '<option>'.$value.'</option>'."\n"; } ?>
    </select>&nbsp;&nbsp;
    <select name="searchoper2" id="searchoper2">
        <option value="">Select operator...</option>
    <?php echo $allopers ?></select>
    &nbsp;<input type="text" class="srch" name="searchval2" size="20" id="searchval2" /></li>
    </ul>
    </fieldset>
    	<fieldset class="search">
    	    <legend class="search">Results Sort Options</legend>
   <ul>
    <li><label for="sortoptiontype1">Sort Options</label><input type="radio" name="sortoptiontype" id="sortoptiontype1" value="default" checked="checked" />Default (lastname, firstname) &nbsp; &nbsp; <input type="radio" name="sortoptiontype" id="sortoptiontype2" value="custom" />custom (select up to two below)</li>
    <li><label for="sortfld1">Sort by</label>&nbsp;<select name="sortfld1" id="sortfld1">
    <option value="">Select...</option>
    <?php foreach($availablefields as $key => $value) { echo '<option>'.$value.'</option>'."\n"; } ?>
    </select>&nbsp;&nbsp;<select name="sortorder1" id="sortorder1">
    <option value="ASC">ascending (A&rarr;Z)</option>
    <option value="DESC">descending (Z&rarr;A)</option>
    </select>&nbsp;&nbsp;<label for="sortfld2">and then (optional)</label><select name="sortfld2" id="sortfld2">
    <option value="">Select...</option>
    <?php foreach($availablefields as $key => $value) { echo '<option>'.$value.'</option>'."\n"; } ?>
    </select>&nbsp;&nbsp;<select name="sortorder2" id="sortorder2">
    <option value="ASC">ascending (A&rarr;Z)</option>
    <option value="DESC">descending (Z&rarr;A)</option>
    </select></li>
    </ul>
    </fieldset> 
</div>
<fieldset class="search">
<span class="fieldsetnotes">Warning: all search results will be displayed and may take time with large data sets.</span>
<ul><li class="submit"><input type="submit" style="color: green;" value="Perform Search &rarr;" />&nbsp;&nbsp;<input type="reset" class="ui-state-default" style="color: #333;" value="Clear the Search Form" /></li>
</ul></fieldset></form>
</div>
<!-- END CUSTOM SEARCH FORM DIV -->