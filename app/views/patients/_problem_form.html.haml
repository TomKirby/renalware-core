- if pb.object.new_record?

  .problem-form{data: { index: @patient.patient_problems.length - 1 }}
    .a-problem
      .row
        .remove-problem.right.add-x

      = pb.hidden_field :id
      = pb.hidden_field :patient_id

      = label_tag :snomed_term
      = text_field_tag :snomed_term, nil, :placeholder => "Enter a snomed concept", :class => "snomed-lookup"

      %ul.no-bullet.snomed-results

      = pb.hidden_field :snomed_id, :class => "selected-snomed-id"

      = pb.label :description
      = pb.text_field :description, :class => "probs-description"

      //change to hidden 
      = pb.label :user_id
      = pb.text_field :user_id

- else
  
  .saved-problem-form
    
    = pb.hidden_field :id
    = pb.hidden_field :patient_id

    / = label_tag :snomed_term
    / = text_field_tag :snomed_term, nil, :placeholder => "Enter a snomed concept", :class => "snomed-lookup"
    
    / %ul.no-bullet.snomed-results

    / = pb.hidden_field :snomed_id, :class => "selected-snomed-id"

    = pb.label :description
    = pb.text_field :description, :class => "probs-description"

    //change to hidden 
    = pb.label :user_id
    = pb.text_field :user_id

